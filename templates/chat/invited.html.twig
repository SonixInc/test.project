{% extends 'base.html.twig' %}

{% block body %}
    {% set route = app.request.attributes.get('_route') %}

    <div class="controls">
        <a class="btn btn-success" href="{{ path('chat.create') }}">Create</a>
    </div>

    <h3>Chats</h3>

    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class="nav-link {% if route == 'chat' %}active{% endif %}" href="{{ path('chat') }}">My</a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if route == 'chat.invited' %}active{% endif %}" href="{{ path('chat.invited') }}">Invited</a>
        </li>
    </ul>

    <div class="box">
        <table class="table table-striped table-hover text-center">
            <thead>
            <tr>
                <th class="active text-center">Name</th>
                <th class="active text-center">Messages</th>
            </tr>
            </thead>

            <tbody>
            {% for chat in chats %}
                <tr>
                    <td><a href="{{ path('chat.chat', {id: chat.id}) }}">{{ chat.name }}</a></td>
                    <td>
                        <span>{{ chat.messages|length }}</span>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
